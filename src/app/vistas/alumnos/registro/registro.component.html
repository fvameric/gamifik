<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" />

<div *ngIf="registroProfe;else registroAlumno">

    <!-- registrarse como alumno -->
    <div id="acceso-profes">
        <input type="submit" (click)="profe()" value="Registrarse como alumno">
    </div>

    <!-- formulario registro profes -->
    <form [formGroup]="registerForm" (ngSubmit)="onRegistro(registerForm.value)" class="Icon-inside">

        <div class="image-upload">
            <label for="file-input">
                <img id="preview" [src]="imgSrc">
              </label>

            <input id="file-input" type="file" (change)="readURL($event)" accept="image/png, image/gif, image/jpeg"><br>
        </div>

        <input type="text" id="login" formControlName="username" placeholder="Usuario" class="fadeIn first" [ngClass]="{ 'is-invalid': form.username.errors }">
        <!-- Missatge error nom usuari -->
        <div *ngIf="submitted && form.username.errors" class="invalid-feedback">
            <div *ngIf="form.username.errors.required">El nombre de usuario es necesario</div>
        </div>

        <input type="text" id="email" formControlName="email" placeholder="Correo Electrónico" class="fadeIn second" [ngClass]="{ 'is-invalid': submitted && form.email.errors }">
        <!-- Missatge error email -->
        <div *ngIf="submitted && form.email.errors" class="invalid-feedback">
            <div *ngIf="form.email.errors.required">El correo electrónico es necesario</div>
            <div *ngIf="form.email.errors.email">Correo electrónico no válido</div>
        </div>

        <div class="form-group">
            <div class="input-group">
                <input id="password" placeholder="Password" formControlName="password" class="fadeIn second" [type]="passType" [ngClass]="{ 'is-invalid': submitted && form.password.errors }">
                <!-- Icono -->
                <i *ngIf="this.passShown" (click)="togglePass()" class="material-icons">
                    visibility
                </i>
                <i *ngIf="!this.passShown" (click)="togglePass()" class="material-icons">
                    visibility_off
                </i>
                <!-- Missatge error pass -->
                <div *ngIf="submitted && form.password.errors" class="invalid-feedback">
                    <div *ngIf="form.password.errors.required">La contraseña es necesaria</div>
                    <div *ngIf="form.password.errors.minlength">La contraseña debe contener al menos 6 carácteres</div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="input-group">
                <input id="confirmPassword" placeholder="Confirmar Contraseña" class="fadeIn third" formControlName="confirmPassword" [type]="confirmPassType" [ngClass]="{ 'is-invalid':submitted && form.confirmPassword.errors }">
                <!-- Icono -->
                <i *ngIf="this.confirmPassShown" (click)="toggleConfirmPass()" class="material-icons">
                    visibility
                </i>
                <i *ngIf="!this.confirmPassShown" (click)="toggleConfirmPass()" class="material-icons">
                    visibility_off
                </i>
                <!-- Missatge error confirmar pass -->
                <div *ngIf="submitted && form.confirmPassword.errors" class="invalid-feedback">
                    <div *ngIf="form.confirmPassword.errors.required">Confirmar la contraseña es necesario</div>
                    <div *ngIf="form.confirmPassword.errors.mustMatch">Las contraseñas deben de coincidir</div>
                </div>
            </div>
        </div>

        <input type="text" id="nombre" name="nombre" placeholder="Nombre" class="fadeIn third" formControlName="nombre" [ngClass]="{ 'is-invalid': form.nombre.errors }">
        <!-- Missatge error nombre -->
        <div *ngIf="submitted && form.nombre.errors" class="invalid-feedback">
            <div *ngIf="form.nombre.errors.required">El nombre es necesario</div>
        </div>

        <input type="text" id="apellidos" name="apellidos" placeholder="Apellidos" class="fadeIn fourth" formControlName="apellidos" [ngClass]="{ 'is-invalid': form.apellidos.errors }">
        <!-- Missatge error apellidos -->
        <div *ngIf="submitted && form.apellidos.errors" class="invalid-feedback">
            <div *ngIf="form.apellidos.errors.required">Los apellidos son necesarios</div>
        </div>


        <select class="select-Centros" formControlName="centro">
            <option value="0" class="option-select-centros">Ilerna</option>
            <option value="1" class="option-select-centros">centre 2</option>
            <option value="2" class="option-select-centros">centre 3</option>
        </select>

        <input type="submit" value="Registrarse" class="fadeIn fifth">
    </form>

    <script src="../../../../scripts/preview.js"></script>
</div>

<ng-template #registroAlumno>
    <!-- contraseña acceso profes -->
    <div id="acceso-profes">
        <input type="password" [(ngModel)]="passAcceso" [ngModelOptions]="{standalone: true}" placeholder="12">
        <input type="submit" value="Acceso profes" (click)="profe()">
    </div>
    <!-- formulario registro alumnos  -->
    <form [formGroup]="registerForm" (ngSubmit)="onRegistro(registerForm.value)" class="Icon-inside" enctype="multipart/form-data">

        <div class="image-upload">
            <label for="file-input">
                <img id="preview" [src]="imgSrc">
              </label>

            <input id="file-input" type="file" (change)="readURL($event)" accept="image/png, image/gif, image/jpeg"><br>
        </div>

        <input type="text" id="login" formControlName="username" placeholder="Usuario" class="fadeIn first" [ngClass]="{ 'is-invalid': form.username.errors }">
        <!-- Missatge error nom usuari -->
        <div *ngIf="submitted && form.username.errors" class="invalid-feedback">
            <div *ngIf="form.username.errors.required">El nombre de usuario es necesario</div>
        </div>

        <input type="text" id="email" formControlName="email" placeholder="Correo Electrónico" class="fadeIn second" [ngClass]="{ 'is-invalid': submitted && form.email.errors }">
        <!-- Missatge error email -->
        <div *ngIf="submitted && form.email.errors" class="invalid-feedback">
            <div *ngIf="form.email.errors.required">El correo electrónico es necesario</div>
            <div *ngIf="form.email.errors.email">Correo electrónico no válido</div>
        </div>

        <div class="form-group">
            <div class="input-group">
                <input id="password" placeholder="Password" formControlName="password" class="fadeIn second" [type]="passType" [ngClass]="{ 'is-invalid': submitted && form.password.errors }">
                <!-- Icono -->
                <i *ngIf="this.passShown" (click)="togglePass()" class="material-icons">
                    visibility
                </i>
                <i *ngIf="!this.passShown" (click)="togglePass()" class="material-icons">
                    visibility_off
                </i>
                <!-- Missatge error pass -->
                <div *ngIf="submitted && form.password.errors" class="invalid-feedback">
                    <div *ngIf="form.password.errors.required">La contraseña es necesaria</div>
                    <div *ngIf="form.password.errors.minlength">La contraseña debe contener al menos 6 carácteres</div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <div class="input-group">
                <input id="confirmPassword" placeholder="Confirmar Contraseña" class="fadeIn third" formControlName="confirmPassword" [type]="confirmPassType" [ngClass]="{ 'is-invalid':submitted && form.confirmPassword.errors }">
                <!-- Icono -->
                <i *ngIf="this.confirmPassShown" (click)="toggleConfirmPass()" class="material-icons">
                    visibility
                </i>
                <i *ngIf="!this.confirmPassShown" (click)="toggleConfirmPass()" class="material-icons">
                    visibility_off
                </i>
                <!-- Missatge error confirmar pass -->
                <div *ngIf="submitted && form.confirmPassword.errors" class="invalid-feedback">
                    <div *ngIf="form.confirmPassword.errors.required">Confirmar la contraseña es necesario</div>
                    <div *ngIf="form.confirmPassword.errors.mustMatch">Las contraseñas deben de coincidir</div>
                </div>
            </div>
        </div>

        <input type="text" id="nombre" name="nombre" placeholder="Nombre" class="fadeIn third" formControlName="nombre" [ngClass]="{ 'is-invalid': form.nombre.errors }">
        <!-- Missatge error nombre -->
        <div *ngIf="submitted && form.nombre.errors" class="invalid-feedback">
            <div *ngIf="form.nombre.errors.required">El nombre es necesario</div>
        </div>

        <input type="text" id="apellidos" name="apellidos" placeholder="Apellidos" class="fadeIn fourth" formControlName="apellidos" [ngClass]="{ 'is-invalid': form.apellidos.errors }">
        <!-- Missatge error apellidos -->
        <div *ngIf="submitted && form.apellidos.errors" class="invalid-feedback">
            <div *ngIf="form.apellidos.errors.required">Los apellidos son necesarios</div>
        </div>

        <input type="date" name="fechaNacimiento" id="fechaNacimiento" placeholder="Date" class="fadeIn fourth" formControlName="fechaNacimiento">
        <!-- Missatge error fecha de nacimiento -->
        <div *ngIf="submitted && form.fechaNacimiento.errors" class="invalid-feedback">
            <div *ngIf="form.fechaNacimiento.errors.required">La fecha de nacimiento es necesaria</div>
        </div>

        <input type="submit" value="Registrarse" class="fadeIn fifth">
    </form>

    <script src="../../../../scripts/preview.js"></script>
</ng-template>